(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{475:function(_,t,r){"use strict";r.r(t);var l=r(49),v=Object(l.a)({},(function(){var _=this,t=_.$createElement,r=_._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[r("h1",{attrs:{id:"mysql面试（4）日志类问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#mysql面试（4）日志类问题"}},[_._v("#")]),_._v(" mysql面试（4）日志类问题")]),_._v(" "),r("h2",{attrs:{id:"mysql-常用日志类型"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#mysql-常用日志类型"}},[_._v("#")]),_._v(" MySQL 常用日志类型")]),_._v(" "),r("table",[r("thead",[r("tr",[r("th",[_._v("日志名称")]),_._v(" "),r("th",[_._v("作用")])])]),_._v(" "),r("tbody",[r("tr",[r("td",[_._v("错误日志（error_log）")]),_._v(" "),r("td",[_._v("记录 mysql 在启动、运行或停止时候出现的问题")])]),_._v(" "),r("tr",[r("td",[_._v("常规日志（general_log）")]),_._v(" "),r("td",[_._v("记录所有发向 MySQL 请求")])]),_._v(" "),r("tr",[r("td",[_._v("慢查询日志（slow_query_log）")]),_._v(" "),r("td",[_._v("记录符合条件的查询")])]),_._v(" "),r("tr",[r("td",[_._v("二进制日志（binary_log）")]),_._v(" "),r("td",[_._v("记录全部有效的数据修改日志")])]),_._v(" "),r("tr",[r("td",[_._v("中继日志（relay_log）")]),_._v(" "),r("td",[_._v("用于主从复制、临时存储从主库同步的二进制日志")])])])]),_._v(" "),r("h2",{attrs:{id:"错误日志（error-log）"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#错误日志（error-log）"}},[_._v("#")]),_._v(" 错误日志（error_log）")]),_._v(" "),r("p",[_._v("分析排除 MySQL 运行错误\n记录未经授权的访问")]),_._v(" "),r("ul",[r("li",[_._v("log_error=$mysql/sql_log/mysql-error.log")]),_._v(" "),r("li",[_._v("log_error_verbosity=[1, 2, 3]")])]),_._v(" "),r("table",[r("thead",[r("tr",[r("th",[_._v("verbosity")]),_._v(" "),r("th",[_._v("作用")])])]),_._v(" "),r("tbody",[r("tr",[r("td",[_._v("1")]),_._v(" "),r("td",[_._v("Error messages")])]),_._v(" "),r("tr",[r("td",[_._v("2")]),_._v(" "),r("td",[_._v("Error and warning messages")])]),_._v(" "),r("tr",[r("td",[_._v("3")]),_._v(" "),r("td",[_._v("Error , warning and note messages")])])])]),_._v(" "),r("ul",[r("li",[_._v("log_error_services=『日志服务组件；日志服务组件』")])]),_._v(" "),r("table",[r("thead",[r("tr",[r("th",[_._v("组件名称")]),_._v(" "),r("th",[_._v("作用")])])]),_._v(" "),r("tbody",[r("tr",[r("td",[_._v("log_filter_internal")]),_._v(" "),r("td",[_._v("默认日志过滤组件，依赖 log_error_verbosity")])]),_._v(" "),r("tr",[r("td",[_._v("log_sink_internal")]),_._v(" "),r("td",[_._v("默认日志输出组件，依赖 log_error")])]),_._v(" "),r("tr",[r("td",[_._v("log_sink_json")]),_._v(" "),r("td",[_._v("将错误日志输出到 json 文件")])]),_._v(" "),r("tr",[r("td",[_._v("log_sink_syseventlog")]),_._v(" "),r("td",[_._v("将错误日志输出到系统日志文件")])])])]),_._v(" "),r("h2",{attrs:{id:"常规日志（general-log）"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#常规日志（general-log）"}},[_._v("#")]),_._v(" 常规日志（general_log）")]),_._v(" "),r("p",[_._v("分析客户端发送到 MySQL 的实际请求")]),_._v(" "),r("ul",[r("li",[_._v("general_log=[ON|OFF]")]),_._v(" "),r("li",[_._v("general_log_file=$mysql/sql_log/general.log")]),_._v(" "),r("li",[_._v("log_output=[FILE|TABLE|NONE]")])]),_._v(" "),r("h2",{attrs:{id:"慢查询日志（slow-query-log）"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#慢查询日志（slow-query-log）"}},[_._v("#")]),_._v(" 慢查询日志（slow_query_log）")]),_._v(" "),r("ul",[r("li",[_._v("将执行成功并符合条件的查询记录到日志")]),_._v(" "),r("li",[_._v("找到需要优化的 SQL")]),_._v(" "),r("li",[_._v("slow_query_log=[ON|OFF]")]),_._v(" "),r("li",[_._v("slow_query_log_file=$mysql/sql_log/slowlog.log")]),_._v(" "),r("li",[_._v("long_query_time=xx 秒")]),_._v(" "),r("li",[_._v("log_queries_not_using_indexes=[ON|OFF]")]),_._v(" "),r("li",[_._v("log_slow_admin_statements=[ON|OFF]")]),_._v(" "),r("li",[_._v("log_slow_slave_statements=[ON|OFF]")])]),_._v(" "),r("h2",{attrs:{id:"二进制日志（binary-log）"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#二进制日志（binary-log）"}},[_._v("#")]),_._v(" 二进制日志（binary_log）")]),_._v(" "),r("p",[_._v("记录所有对数据库的数据修改\n基于时间点的备份和恢复\n主从复制")]),_._v(" "),r("ul",[r("li",[_._v("log-bin[=base_name]")]),_._v(" "),r("li",[_._v("binlog_format=[ROW|STATEMENT|MIXED]")]),_._v(" "),r("li",[_._v("binlog_rows_query_log_events=[ON|OFF]")]),_._v(" "),r("li",[_._v("log_slave_updates=[ON|OFF]")]),_._v(" "),r("li",[_._v("sync_binlog=[1|0]")]),_._v(" "),r("li",[_._v("expire_logs_days=days")]),_._v(" "),r("li",[_._v("PURGE BINARY LOGS TO 'mysql-bin.010'")]),_._v(" "),r("li",[_._v("PURGE BINARY LOGS BEFORE '2008-04-02 22:46:24'")])]),_._v(" "),r("h2",{attrs:{id:"中继日志（relay-log）"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#中继日志（relay-log）"}},[_._v("#")]),_._v(" 中继日志（relay_log）")]),_._v(" "),r("ul",[r("li",[_._v("relay_log=filename")]),_._v(" "),r("li",[_._v("relay_log_purge=[ON|OFF]")])]),_._v(" "),r("h2",{attrs:{id:"欢迎扫描下方二维码，个人博客，持续关注："}},[r("a",{staticClass:"header-anchor",attrs:{href:"#欢迎扫描下方二维码，个人博客，持续关注："}},[_._v("#")]),_._v(" 欢迎扫描下方二维码，"),r("a",{attrs:{href:"https://www.phpst.cn",target:"_blank",rel:"noopener noreferrer"}},[_._v("个人博客"),r("OutboundLink")],1),_._v("，持续关注：")]),_._v(" "),r("p",[r("img",{attrs:{src:"https://ww1.sinaimg.cn/large/a616b9a4gy1g4xzv954a4j20760763yo.jpg",alt:""}})]),_._v(" "),r("p",[_._v("互联网工程师（id:phpstcn），我们一起学习，一起进步")])])}),[],!1,null,null,null);t.default=v.exports}}]);