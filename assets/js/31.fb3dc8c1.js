(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{440:function(t,a,s){"use strict";s.r(a);var e=s(49),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"node新手课（19）项目打包和部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node新手课（19）项目打包和部署"}},[t._v("#")]),t._v(" node新手课（19）项目打包和部署")]),t._v(" "),s("h2",{attrs:{id:"简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),s("p",[t._v("上节课我们讲了首页列表，我们所有开发功能模块就已经讲完了，今天是最后一课，我们来讲项目部署到服务器。")]),t._v(" "),s("h2",{attrs:{id:"需求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#需求"}},[t._v("#")]),t._v(" 需求")]),t._v(" "),s("p",[t._v("把项目部署到云服务器上，能够对外网提供接口服务。")]),t._v(" "),s("h2",{attrs:{id:"功能流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#功能流程"}},[t._v("#")]),t._v(" 功能流程")]),t._v(" "),s("p",[t._v("1）在云服务器上安装nodejs环境。")]),t._v(" "),s("p",[t._v("2） 将我们写好的 koa2 项目就是sir-koa目录 全部放到服务器上 (除了 node_modules 文件夹)。")]),t._v(" "),s("p",[t._v("3）云服务切换到你项目所在路径，以/home/sir-koa目录为例。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("$ cd /home/sir-koa\n$ npm install  //安装相关依赖文件\n$ npm run start //测试下你的 koa2 项目能不能跑起来\n")])])]),s("blockquote",[s("p",[t._v("ps：这样还不够，因为退出服务器后 node 进程就自动关了，项目也就自动关闭了\n所以我们需要 pm2 来守护进程。")])]),t._v(" "),s("p",[t._v("4）安装 pm2")]),t._v(" "),s("p",[t._v("我们选择全局安装 pm2。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("$ npm install pm2 -g\n")])])]),s("p",[t._v("安装完成后云服务切换到项目所在路径/home/sir-koa。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("$ pm2 start ./bin/www --watch\n")])])]),s("p",[t._v("一般我们都是通过npm start启动应用，其实就是调用node ./bin/www。那么，换成pm2就是"),s("code",[t._v("pm2 start")])]),t._v(" "),s("blockquote",[s("p",[t._v("注意，这里用了--watch参数，意味着当你的koa2应用代码发生变化时，pm2会帮你重启服务。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.guojiang.club/Fg3MuhHA-tDRWMLv6wltQtzl7uG5",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("node教程已经全部更新完，大家可以在教程基础上根据需求扩展新功能。\n青山不改，绿水长流，江湖再见，后会有期。")])])}),[],!1,null,null,null);a.default=r.exports}}]);