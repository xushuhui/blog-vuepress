(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{448:function(t,e,a){"use strict";a.r(e);var s=a(49),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"node新手课（8）路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node新手课（8）路由"}},[t._v("#")]),t._v(" node新手课（8）路由")]),t._v(" "),a("h2",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),a("p",[t._v("上节课我们来搭建项目架构，koa2 和 mysql。这节课我们讲解 koa2 的路由")]),t._v(" "),a("h3",{attrs:{id:"路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路由"}},[t._v("#")]),t._v(" 路由")]),t._v(" "),a("p",[t._v("路由就是客户端的请求发送到服务端的的 url。我们打开浏览器输入 http://www.baidu.com 进入百度，这个网址就是路由。")]),t._v(" "),a("blockquote",[a("p",[t._v("根据功能划分路由，把路由和数据处理分离，符合单一职责的设计原则")])]),t._v(" "),a("p",[t._v("上节课我们搭建的项目的 routes 目录就是用来存放所有路由文件。")]),t._v(" "),a("p",[t._v("我们在 sir-koa 目录下新建 app 目录，在 app 目录中新建 api 和 model 目录，分别作为控制层和模型层。")]),t._v(" "),a("p",[t._v("路由调用控制层的方法。控制层接收前端传过来的参数，调用模型层的方法进行数据库操作，处理后返回结果给前端。")]),t._v(" "),a("p",[t._v("入口文件 app.js 中调用了路由模块")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// routes\napp.use(index.routes(), index.allowedMethods())\napp.use(users.routes(), users.allowedMethods())\n")])])]),a("h2",{attrs:{id:"功能模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#功能模块"}},[t._v("#")]),t._v(" 功能模块")]),t._v(" "),a("p",[t._v("功能分为用户模块和卡片模块，我们把列表每条信息当成一个卡片。")]),t._v(" "),a("blockquote",[a("p",[t._v("routes/user.js")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const router = require('koa-router')()\nconst userApi = require('../app/api/user')\n\nrouter.prefix('/user')\n//微信登录\nrouter.post('/wechatlogin', function (ctx, next) {\n  userApi.wechatLogin(ctx) \n})\n// 手机号登录\nrouter.post('/login', function (ctx, next) {\n  userApi.login(ctx) \n})\n//更新个人信息\nrouter.put('/info', function (ctx, next) {\n  userApi.info(ctx) \n})\n//查询个人信息\nrouter.get('/me', function (ctx, next) {\n  userApi.me(ctx) \n})\n\nmodule.exports = router\n")])])]),a("blockquote",[a("p",[t._v("routes/index.js")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("...\nconst indexApi = require('../app/api/index')\n//首页列表\nrouter.get('/card', async (ctx, next) => {\n  indexApi.getCard(ctx)\n})\n//打卡\nrouter.post('/card', async (ctx, next) => {\n  indexApi.addCard(ctx)\n})\n//点赞\nrouter.post('/praise', async (ctx, next) => {\n  indexApi.praise(ctx)\n})\n")])])]),a("h3",{attrs:{id:"接口文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接口文档"}},[t._v("#")]),t._v(" 接口文档")]),t._v(" "),a("p",[t._v("https://note.youdao.com/ynoteshare1/index.html?id=ae97d2c2bc96012409533ab7679061d2&type=note")]),t._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("koa2 的路由就讲完了，你掌握了吗？有问题欢迎到群里和志同道合的小伙伴一起交流。")]),t._v(" "),a("p",[t._v("下节课我们讲解 nodejs 操作 mysql，继续加油吧，Let's go！")])])}),[],!1,null,null,null);e.default=n.exports}}]);